{% trans_default_domain("support.admin") %}


<tr class="vertical-middle">

    <td class="text-nowrap">
        {# Пользовательское меню #}
        {{ include(_self|replace({ "card.html.twig": "_usecase.html.twig" })) }}
    </td>

    <td class="text-center">

        <div class="ms-0 text-start">

                <span class="d-inline-block text-truncate text-emphasis align-middle"
                      style="max-width: 150px;">{{ item.type_profile_name }}</span>

        </div>
    </td>

    <td class="ms-0 text-center">
        <div class="d-flex w-100 justify-content-center">
            <span class="d-inline-block text-truncate text-emphasis align-middle"
                  style="max-width: 150px;">{{ item.name }}</span>
        </div>
    </td>
    <td class="w-25 text-center">
        <a
                class="text-decoration-none offcanvas-link "
                data-href="{{ path('support:admin.detail', { id: item.event }) }}"
                data-bs-toggle="#offcanvas"
                data-bs-target="#offcanvas"
                role="button"
                aria-controls="offcanvas"
        >
        <span class="d-inline-block text-truncate  align-middle" style="max-width: 150px;">
            {{ item.title|raw }}
        </span>
        </a>
    </td>

    <td class="w-25 text-center">

        {% if is_granted('ROLE_ADMIN') %}

            <a href="{{ path('support:admin.add', {id: item.event, message: item.message_id}) }}"
               class="text-decoration-none modal-link disabled"
               data-bs-toggle="modal"
               data-bs-target="#modal"
            >
            <span class="d-inline-block text-truncate  align-middle"
                  style="max-width: 250px;">{{ item.message|striptags }}</span>
            </a>


        {% else %}
            <span class="d-inline-block text-truncate  align-middle"
                  style="max-width: 250px;">{{ item.message|striptags }}</span>
        {% endif %}


    </td>

    <td class="text-center">
        {% if item.status == 'open' %}
            <div class="badge bg-success">
                Открытый
            </div>
        {% else %}
            <div class="badge bg-danger">
                Зактрытый
            </div>
        {% endif %}
    </td>

    <td class="text-center">
        {% if item.priority == 'low' %}
            <div class="badge bg-warning">
                Низкий
            </div>
        {% else %}
            <div class="badge bg-danger">
                Высокий
            </div>
        {% endif %}
    </td>

    {% if is_granted('ROLE_ADMIN') %}
        <td class="text-center">
            <a href="{{ path('support:admin.add', {id: item.event, message: item.message_id}) }}"
               class="badge bg-primary text-decoration-none modal-link disabled"
               data-bs-toggle="modal"
               data-bs-target="#modal"
            >
                Ответить
            </a>
        </td>
    {% endif %}
</tr>

<div
        class="offcanvas offcanvas-start"
        tabindex="-1"
        id="offcanvas"
        style="width:640px"
>

</div>