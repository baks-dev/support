async function updateWidgetList(){await fetch("/admin/supports",{method:"GET",cache:"no-cache",credentials:"same-origin",headers:{"X-Requested-With":"XMLHttpRequest"},redirect:"follow",referrerPolicy:"no-referrer"}).then((response=>{if(response.status!==200){return false}return response.text()})).then((data=>{if(data){var myCollapse=document.getElementById("collapseChat");if(myCollapse===null){console.log('Элемент с идентификатором id="collapseChat" не найден');return}let bsCollapse=bootstrap.Collapse.getOrCreateInstance(myCollapse);myCollapse.innerHTML=data;let lazy=document.createElement("script");lazy.src="/assets/js/lazyload.min.js?v="+Date.now();document.head.appendChild(lazy)}}));return false}executeFunc((function quxjTRYv(){if(typeof Centrifuge==="function"){const dsn=window.centrifugo_dsn;const token=window.centrifugo_token;if(!dsn||!token){return false}centrifuge=new Centrifuge("wss://"+dsn+"/connection/websocket",{token:token,getToken:function(ctx){return getToken("/centrifugo/credentials/user",ctx)},debug:false});const user_channel=window.current_profile+"_ticket";const subscriptions=[user_channel,"ticket"];for(const subscription of subscriptions){centrifuge.newSubscription(subscription).on("publication",(function(ctx){if(ctx.data.status==="open"){document.getElementById("widget_notification").classList.remove("d-none");const header="Сообщение поддержки";const warningMessageHandler='{ "type":"notice" , '+'"header":"'+header+'"  , '+'"message" : "Добавлено новое сообщение." }';createToast(JSON.parse(warningMessageHandler))}})).subscribe()}centrifuge.connect();const collapse=document.querySelector(".collapse-link-content");collapse.addEventListener("hide.bs.collapse",(event=>{centrifuge.disconnect()}));return true}return false}));document.querySelector(".collapse-link-content").addEventListener("click",(function(){document.getElementById("widget_notification").classList.add("d-none")}));